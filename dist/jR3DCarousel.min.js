/**
 * Author: Vinayak Rangnathrao Jadhav
 * Project: jR3DCarousel
 * Version: 1.0.1
 **/
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?module.exports=g(require("jquery")):g(jQuery)})(function(g){g.fn.jR3DCarousel=function(C){function v(){q=setInterval(z,a.animationInterval+a.animationDuration)}function z(){r=u+1;x.run(a.animation,r);y()}function A(){this.animations={slide:D,slide3D:E,scroll:F,scroll3D:G,fade:H}}function D(a){c.css({perspective:"",overflow:"hidden"});e=h*a;f.css({transform:"translateZ("+-d+"px) rotateY("+-e+"deg)"})}
function E(a){c.css({perspective:k,overflow:"visible"});e=h*a;f.css({transform:"translateZ("+-d+"px) rotateY("+-e+"deg)"})}function F(a){c.css({perspective:"",overflow:"hidden"});e=h*a;f.css({transform:"translateZ("+-d+"px) rotateX("+-e+"deg)"})}function G(a){c.css({perspective:k,overflow:"visible"});e=h*a;f.css({transform:"translateZ("+-d+"px) rotateX("+-e+"deg)"})}function H(c){f.css({transition:"opacity "+a.animationDuration+"ms "+a.animationCurve,opacity:0});e=h*c;f.css({transform:"translateZ("+
-d+"px) rotateY("+-e+"deg)"});f.css({opacity:1})}function y(){c.find(".nav").css({backgroundColor:"rgba(255, 255, 255, 0.77)"}).eq(r%b).css({backgroundColor:"rgba(0, 0, 0, 0.77)"});u=Math.round(e/h);a.onSlideShow.call(this,f.find("."+a.slideClass).eq(u%b))}function B(){c.width("100%");f.hide();m=c.width()<a.width?c.width():a.width;t=m/I;c.css({width:m+"px",height:t+"px"});-1!=a.animation.indexOf("slide")?(d=m/2/Math.tan(Math.PI/b),k=m/2*Math.tan(2*Math.PI/b)+"px"):-1!=a.animation.indexOf("scroll")?
(d=t/2/Math.tan(Math.PI/b),k=t/2*Math.tan(2*Math.PI/b)+"px"):"fade"==a.animation&&(d=m/2/Math.tan(Math.PI/b),k=m/2*Math.tan(2*Math.PI/b)+"px");c.find("."+a.slideClass).each(function(c){var b=g(this);-1!=a.animation.indexOf("slide")?n="rotateY("+h*c+"deg) translateZ("+d+"px)":-1!=a.animation.indexOf("scroll")?n="rotateX("+h*c+"deg) translateZ("+d+"px)":"fade"==a.animation&&(n="rotateY("+h*c+"deg) translateZ("+d+"px)");b.css({transform:n})});k=a.perspective||k;f.css({transform:"translateZ("+-d+"px) rotateY("+
-e+"deg)"});f.show();c.css({perspective:k})}function K(a,c){var w,b,d,f,g,h,k;a.on("touchstart",function(a){a=a.originalEvent.changedTouches[0];w="none";b=a.pageX;d=a.pageY;k=(new Date).getTime()}).on("touchmove",function(a){a.preventDefault()}).on("touchend",function(a){a=a.originalEvent.changedTouches[0];f=a.pageX-b;g=a.pageY-d;h=(new Date).getTime()-k;700>=h&&(20<=Math.abs(f)&&100>=Math.abs(g)?w=0>f?"left":"right":20<=Math.abs(g)&&100>=Math.abs(f)&&(w=0>g?"up":"down"));c(w)})}var a=g.extend(!0,
{},{width:innerWidth,height:innerHeight,slides:[],slideLayout:"fill",perspective:0,animation:"slide3D",animationCurve:"ease",animationDuration:700,animationInterval:2E3,autoplay:!0,controls:!0,slideClass:"jR3DCarouselSlide",navigation:"circles",onSlideShow:function(){}},C),c=this,m=a.width,t=a.height,I=a.width/a.height,f=g("<div class='jR3DCarousel' />").css({width:"100%",height:"100%",transition:"transform "+a.animationDuration+"ms "+a.animationCurve,transformStyle:"preserve-3d"}).appendTo(c),u=
0,r=1,x=new A,l,p,q,h,e=0,d,k,n,b=a.slides.length||c.find("."+a.slideClass).length;(function(){function e(){l=g("<div class='previous controls' style='left: 0.1em;'>&lang;</div>");p=g("<div class='next controls' style='right: 0.1em;'>&rang;</div>");l.add(p).css({position:"absolute",top:"50%",zIndex:1,transform:"translateY(-50%)",fontSize:"4em",color:"rgba(255, 255, 255, 0.97)",cursor:"pointer",userSelect:"none"}).appendTo(c).hide();l.on("click",function(){r=u-1;x.run(a.animation,r);y()});p.on("click",
function(){z()});c.on("mouseenter touchstart",function(){l.add(p).show()}).on("mouseleave touchcancel",function(){l.add(p).hide()});l.mousedown(function(){l.html("&langd;")}).mouseup(function(){l.html("&lang;")});p.mousedown(function(){p.html("&rangd;")}).mouseup(function(){p.html("&rang;")});g(document).on("keydown",function(a){var b=c[0].getBoundingClientRect();(b=0<b.bottom&&0<b.right&&b.left<(innerWidth||document.documentElement.clientWidth)&&b.top<(innerHeight||document.documentElement.clientHeight))&&
37==a.which?(clearInterval(q),l.click()):b&&39==a.which&&(clearInterval(q),p.click())});K(c,function(b){clearInterval(q);"left"==b?p.click():"right"==b?l.click():-1!=a.animation.indexOf("scroll")&&("down"==b?p.click():"up"==b&&l.click())})}function J(){for(var d=g("<div class=navigation />").css({position:"absolute",bottom:0,right:0}),h=0;h<b;h++)d.append("<div class=nav></div>");"circles"==a.navigation&&d.find(".nav").css({borderRadius:"12px"});d.find(".nav").css({display:"inline-block",margin:"5px",
cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.77)",width:"12px",height:"12px",transition:"all "+a.animationDuration+"ms ease"}).first().css({backgroundColor:"rgba(0, 0, 0, 1)"});f.after(d);c.on("click",".nav",function(){var c=g(this).index();r=Math.floor(u/b)*b+c;x.run(a.animation,r);y()})}(function(){-1!=a.animation.indexOf("slide")?(d=m/2/Math.tan(Math.PI/b),k=m/2*Math.tan(2*Math.PI/b)+"px"):-1!=a.animation.indexOf("scroll")?(d=t/2/Math.tan(Math.PI/b),k=t/2*Math.tan(2*Math.PI/b)+"px"):
"fade"==a.animation&&(d=m/2/Math.tan(Math.PI/b),k=m/2*Math.tan(2*Math.PI/b)+"px");h=360/b;if(a.slides.length)for(var e=0;e<a.slides.length;e++){var l=g("<div class='jR3DCarouselSlide' data-index="+e+" />").append("<img src='"+a.slides[e].src+"' alt='"+a.slides[e].alt+"' />");-1!=a.animation.indexOf("slide")?n="rotateY("+h*e+"deg) translateZ("+d+"px)":-1!=a.animation.indexOf("scroll")?n="rotateX("+h*e+"deg) translateZ("+d+"px)":"fade"==a.animation&&(n="rotateY("+h*e+"deg) translateZ("+d+"px)");l.css({transform:n});
f.append(l)}else c.find("."+a.slideClass).each(function(b){var c=g(this).attr("data-index",b);-1!=a.animation.indexOf("slide")?n="rotateY("+h*b+"deg) translateZ("+d+"px)":-1!=a.animation.indexOf("scroll")?n="rotateX("+h*b+"deg) translateZ("+d+"px)":"fade"==a.animation&&(n="rotateY("+h*b+"deg) translateZ("+d+"px)");c=c.css({transform:n}).detach();f.append(c)});f.find("."+a.slideClass).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",backfaceVisibility:"hidden"}).find("img").css({width:"100%",
height:"100%",objectFit:a.slideLayout});k=a.perspective||k;c.css({perspective:k,width:m+"px",height:t+"px",position:"relative",overflow:"visible"})})();a.controls&&e();a.navigation&&J();a.autoplay&&(document.addEventListener("visibilitychange",function(){document.hidden?clearInterval(q):v()}),c.hover(function(){clearTimeout(g(this).data("timeout"));clearInterval(q)},function(){g(this).data("timeout",setTimeout(function(){v()},a.animationInterval+a.animationDuration))}),v());addEventListener("resize",
B);B()})();A.prototype.run=function(a,b){this.animations[a](b)};this.showSlide=function(a){f.find(".nav").eq((a-1)%b).click()};this.getCurrentSlide=function(){return f.find("."+a.slideClass).eq(u%b)};this.getSlideByIndex=function(b){return f.find("."+a.slideClass+"[data-index="+b+"]")};this.showPreviousSlide=function(){l.click()};this.showNextSlide=function(){p.click()};this.playCarousel=function(){v()};this.pauseCarousel=function(){clearInterval(q)};return this}});
