/**
 * Author: Vinayak Rangnathrao Jadhav
 * Project: jR3DCarousel
 * Version: 1.0.0
 **/
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?module.exports=g(require("jquery")):g(jQuery)})(function(g){g.fn.jR3DCarousel=function(C){function x(){t=setInterval(A,a.animationInterval+a.animationDuration)}function A(){y=Math.round(k/e);p=y+1;z.run(a.animation,p)}function w(){this.animations={slide:D,slide3D:E,scroll:F,scroll3D:G,fade:H}}function D(a){c.css({perspective:"",overflow:"hidden"});k=e*a;f.css({transform:"translateZ("+-b+"px) rotateY("+
-k+"deg)"});u()}function E(a){c.css({perspective:h,overflow:"visible"});k=e*a;f.css({transform:"translateZ("+-b+"px) rotateY("+-k+"deg)"});u()}function F(a){c.css({perspective:"",overflow:"hidden"});k=e*a;f.css({transform:"translateZ("+-b+"px) rotateX("+-k+"deg)"});u()}function G(a){c.css({perspective:h,overflow:"visible"});k=e*a;f.css({transform:"translateZ("+-b+"px) rotateX("+-k+"deg)"});u()}function H(c){f.css({transition:"opacity "+a.animationDuration+"ms "+a.animationCurve,opacity:0});k=e*c;
f.css({transform:"translateZ("+-b+"px) rotateY("+-k+"deg)"});f.css({opacity:1});u()}function u(){c.find(".nav").css({backgroundColor:"rgba(255, 255, 255, 0.77)"}).eq(p%d).css({backgroundColor:"rgba(0, 0, 0, 0.77)"});a.onSlideShow.call(this,f.find("."+a.slideClass).eq(p%d))}function B(){c.hide();c.width("100%");l=c.width()<a.width?c.width():a.width;v=l/J;c.css({width:l+"px",height:v+"px"});-1!=a.animation.indexOf("slide")?(b=l/2/Math.tan(Math.PI/d),h=l/2*Math.tan(2*Math.PI/d)+"px"):-1!=a.animation.indexOf("scroll")?
(b=v/2/Math.tan(Math.PI/d),h=v/2*Math.tan(2*Math.PI/d)+"px"):"fade"==a.animation&&(b=l/2/Math.tan(Math.PI/d),h=l/2*Math.tan(2*Math.PI/d)+"px");c.find("."+a.slideClass).each(function(c){var d=g(this);-1!=a.animation.indexOf("slide")?m="rotateY("+e*c+"deg) translateZ("+b+"px)":-1!=a.animation.indexOf("scroll")?m="rotateX("+e*c+"deg) translateZ("+b+"px)":"fade"==a.animation&&(m="rotateY("+e*c+"deg) translateZ("+b+"px)");d.css({transform:m})});h=a.perspective||h;f.css({transform:"translateZ("+-b+"px) rotateY("+
-k+"deg)"});c.css({perspective:h});c.fadeIn()}function K(a,c){var b,n,d,e,f,g,h;a.on("touchstart",function(a){a=a.originalEvent.changedTouches[0];b="none";n=a.pageX;d=a.pageY;h=(new Date).getTime()}).on("touchmove",function(a){a.preventDefault()}).on("touchend",function(a){a=a.originalEvent.changedTouches[0];e=a.pageX-n;f=a.pageY-d;g=(new Date).getTime()-h;700>=g&&(20<=Math.abs(e)&&100>=Math.abs(f)?b=0>e?"left":"right":20<=Math.abs(f)&&100>=Math.abs(e)&&(b=0>f?"up":"down"));c(b)})}var a=g.extend(!0,
{},{width:1349,height:668,slides:[],slideLayout:"fill",perspective:0,animation:"slide3D",animationCurve:"ease",animationDuration:700,animationInterval:2E3,autoplay:!0,controls:!0,slideClass:"jR3DCarouselSlide",navigation:"circles",onSlideShow:function(){}},C),c=this,l=a.width,v=a.height,J=a.width/a.height,f=g("<div class='jR3DCarousel' />").css({width:"100%",height:"100%",transition:"transform "+a.animationDuration+"ms "+a.animationCurve,transformStyle:"preserve-3d"}).appendTo(c),y=0,p=1,z=new w,
q,r,t,e,k=0,b,h,m,d=a.slides.length||c.find("."+a.slideClass).length;(function(){function I(){q=g("<div class='previous controls' style='left: 8px; transform: rotate(-45deg);'></div>");r=g("<div class='next controls' style='right: 8px; transform: rotate(135deg);'></div>");q.add(r).appendTo(c).css({position:"absolute",top:"42%",zIndex:1,display:"inline-block",padding:"1.2em",boxShadow:"2px 2px 0 rgba(255,255,255,0.9) inset",cursor:"pointer"}).hide();q.on("click",function(){y=Math.round(k/e);p=y-1;
z.run(a.animation,p)});r.on("click",function(){A()});c.on("mouseenter touchstart",function(){q.add(r).fadeIn()}).on("mouseleave touchcancel",function(){q.add(r).fadeOut()});g(document).on("keydown",function(a){var b=c[0].getBoundingClientRect();(b=0<b.bottom&&0<b.right&&b.left<(innerWidth||document.documentElement.clientWidth)&&b.top<(innerHeight||document.documentElement.clientHeight))&&37==a.which?(clearInterval(t),q.click()):b&&39==a.which&&(clearInterval(t),r.click())});K(c,function(b){clearInterval(t);
"left"==b?r.click():"right"==b?q.click():-1!=a.animation.indexOf("scroll")&&("down"==b?r.click():"up"==b&&q.click())})}function u(){for(var b=g("<div class=navigation />").css({position:"absolute",bottom:0,right:0}),e=0;e<d;e++)b.append("<div class=nav></div>");"circles"==a.navigation&&b.find(".nav").css({borderRadius:"12px"});b.find(".nav").css({display:"inline-block",margin:"5px",cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.77)",width:"12px",height:"12px",transition:"all "+a.animationDuration+
"ms ease"}).first().css({backgroundColor:"rgba(0, 0, 0, 1)"});f.after(b);c.on("click",".nav",function(){p=g(this).index();z.run(a.animation,p)})}(function(){-1!=a.animation.indexOf("slide")?(b=l/2/Math.tan(Math.PI/d),h=l/2*Math.tan(2*Math.PI/d)+"px"):-1!=a.animation.indexOf("scroll")?(b=v/2/Math.tan(Math.PI/d),h=v/2*Math.tan(2*Math.PI/d)+"px"):"fade"==a.animation&&(b=l/2/Math.tan(Math.PI/d),h=l/2*Math.tan(2*Math.PI/d)+"px");e=360/d;if(a.slides.length)for(var n=0;n<a.slides.length;n++){var k=g("<div class='jR3DCarouselSlide' data-index="+
n+" />").append("<img src='"+a.slides[n].src+"' alt='"+a.slides[n].alt+"' />");-1!=a.animation.indexOf("slide")?m="rotateY("+e*n+"deg) translateZ("+b+"px)":-1!=a.animation.indexOf("scroll")?m="rotateX("+e*n+"deg) translateZ("+b+"px)":"fade"==a.animation&&(m="rotateY("+e*n+"deg) translateZ("+b+"px)");k.css({transform:m});f.append(k)}else c.find("."+a.slideClass).each(function(c){var d=g(this).attr("data-index",c);-1!=a.animation.indexOf("slide")?m="rotateY("+e*c+"deg) translateZ("+b+"px)":-1!=a.animation.indexOf("scroll")?
m="rotateX("+e*c+"deg) translateZ("+b+"px)":"fade"==a.animation&&(m="rotateY("+e*c+"deg) translateZ("+b+"px)");d=d.css({transform:m}).detach();f.append(d)});f.find("."+a.slideClass).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",backfaceVisibility:"hidden"}).find("img").css({width:"100%",height:"100%",objectFit:a.slideLayout});h=a.perspective||h;c.css({perspective:h,width:l+"px",height:v+"px",position:"relative",overflow:"visible"})})();a.controls&&I();a.navigation&&u();a.autoplay&&
(x(),c.hover(function(){clearInterval(t)},function(){x()}));addEventListener("resize",B);B();var w=function(){var a,b,c={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(a in c)if(a in document){b=c[a];break}return function(c){c&&document.addEventListener(b,c);return!document[a]}}();w(function(){w()?x():clearInterval(t)})})();w.prototype.run=function(a,b){this.animations[a](b)};this.showSlide=function(a){f.find(".nav").eq((a-
1)%d).click()};this.getCurrentSlide=function(){return f.find("."+a.slideClass).eq(p%d)};this.getSlideByIndex=function(b){return f.find("."+a.slideClass+"[data-index="+b+"]")};this.showPreviousSlide=function(){q.click()};this.showNextSlide=function(){r.click()};this.playCarousel=function(){x()};this.pauseCarousel=function(){clearInterval(t)};return this}});